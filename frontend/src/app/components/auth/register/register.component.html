<!-- Registration Modal Component -->
<div class="modal-overlay" (click)="onCancel()">
  <div 
    class="modal-container" 
    (click)="$event.stopPropagation()"
    [class.loading]="isLoading"
    [class.success]="isSuccess"
  >
    <!-- Close Button -->
    <button 
      class="close-btn" 
      (click)="onCancel()"
      [disabled]="isLoading"
      type="button"
    >
      ×
    </button>

    <!-- Success State -->
    <div class="success-content" *ngIf="isSuccess">
      <div class="success-icon">✓</div>
      <h2 class="success-title">Registration Successful!</h2>
      <p class="success-message">Your account has been created successfully.</p>
    </div>

    <!-- Registration Form -->
    <div class="form-content" *ngIf="!isSuccess">
      <h2 class="modal-title">Registration</h2>
      
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <!-- Profile Information Section -->
        <div class="form-section">
          <h3 class="section-title">Profile Informations</h3>
          
          <!-- First Name -->
          <div class="form-group" [class.has-error]="hasError('firstName')">
            <input
              type="text"
              class="form-control"
              formControlName="firstName"
              placeholder="First Name"
              [class.error]="hasError('firstName')"
            />
            <span class="form-error" *ngIf="hasError('firstName')">
              {{ getErrorMessage('firstName') }}
            </span>
          </div>

          <!-- Last Name -->
          <div class="form-group" [class.has-error]="hasError('lastName')">
            <input
              type="text"
              class="form-control"
              formControlName="lastName"
              placeholder="Last Name"
              [class.error]="hasError('lastName')"
            />
            <span class="form-error" *ngIf="hasError('lastName')">
              {{ getErrorMessage('lastName') }}
            </span>
          </div>

          <!-- Required Fields Note -->
          <p class="required-note">
            First name is required<span class="required">!</span><br>
            Last name is required<span class="required">!</span>
          </p>
        </div>

        <!-- Login Data Section -->
        <div class="form-section">
          <h3 class="section-title">Login Datas</h3>
          
          <!-- Email -->
          <div class="form-group" [class.has-error]="hasError('email')">
            <input
              type="email"
              class="form-control"
              formControlName="email"
              placeholder="E-mail address"
              [class.error]="hasError('email')"
            />
            <span class="form-error" *ngIf="hasError('email')">
              {{ getErrorMessage('email') }}
            </span>
          </div>

          <!-- Password -->
          <div class="form-group" [class.has-error]="hasError('password')">
            <input
              type="password"
              class="form-control"
              formControlName="password"
              placeholder="Password"
              [class.error]="hasError('password')"
            />
            <span class="form-error" *ngIf="hasError('password')">
              {{ getErrorMessage('password') }}
            </span>
          </div>

          <!-- Confirm Password -->
          <div class="form-group" [class.has-error]="hasError('confirmPassword')">
            <input
              type="password"
              class="form-control"
              formControlName="confirmPassword"
              placeholder="Password confirmation"
              [class.error]="hasError('confirmPassword')"
            />
            <span class="form-error" *ngIf="hasError('confirmPassword')">
              {{ getErrorMessage('confirmPassword') }}
            </span>
          </div>

          <!-- Required Fields Note -->
          <p class="required-note">
            Email address is required<span class="required">!</span><br>
            Password is required<span class="required">!</span>
          </p>
        </div>

        <!-- Error Message -->
        <div class="registration-error" *ngIf="registrationError">
          {{ registrationError }}
        </div>

        <!-- Submit Button -->
        <button 
          type="submit" 
          class="btn btn-primary register-btn"
          [disabled]="isLoading"
        >
          Register
        </button>

        <!-- Login Link -->
        <p class="login-link">
          or <a href="#" (click)="onCancel(); $event.preventDefault()">login</a>
        </p>
      </form>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" *ngIf="isLoading">
      <app-spinner [size]="'medium'"></app-spinner>
    </div>

    <!-- Flags for demo purposes -->
    <span class="flag flag-3">3</span>
    <span class="flag flag-5" *ngIf="registerForm.invalid && registerForm.touched">5</span>
    <span class="flag flag-6" *ngIf="isLoading">6</span>
  </div>
</div>