<!-- Login Page Component -->
<div class="login-page">
  <div class="container">
    <div class="login-wrapper">
      <!-- Left Box - New Customers -->
      <div class="login-box new-customers-box">
        <h2 class="box-title">NEW CUSTOMERS</h2>
        <p class="box-description">
          By creating an account with our store, you will be able to move through
          the checkout process faster, store multiple shipping addresses, view and
          track your orders in your account and more.
        </p>
        <button 
          class="btn btn-primary create-account-btn" 
          (click)="showRegister()"
          [disabled]="showRegisterModal"
        >
          Create an Account
        </button>
        <span class="flag flag-1">1</span>
      </div>

      <!-- Right Box - Registered Customers -->
      <div class="login-box registered-customers-box">
        <h2 class="box-title">REGISTERED CUSTOMERS</h2>
        
        <!-- Success Message -->
        <div class="success-message" *ngIf="registrationSuccess">
          <p>Registration successful! Please log in with your new account.</p>
        </div>

        <!-- Login Form -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <p class="form-intro">If you have an account with us, please log in.</p>

          <!-- Email Field -->
          <div class="form-group" [class.has-error]="hasError('email')">
            <label for="email" class="form-label">
              Email Address <span class="required">*</span>
            </label>
            <input
              type="email"
              id="email"
              class="form-control"
              formControlName="email"
              placeholder="your@email.com"
              [class.error]="hasError('email')"
            />
            <span class="form-error" *ngIf="hasError('email')">
              This is a required field.
            </span>
          </div>

          <!-- Password Field -->
          <div class="form-group" [class.has-error]="hasError('password')">
            <label for="password" class="form-label">
              Password <span class="required">*</span>
            </label>
            <input
              type="password"
              id="password"
              class="form-control"
              formControlName="password"
              placeholder="••••••"
              [class.error]="hasError('password')"
            />
            <span class="form-error" *ngIf="hasError('password')">
              This is a required field.
            </span>
          </div>

          <!-- Error Message -->
          <div class="login-error" *ngIf="loginError">
            {{ loginError }}
          </div>

          <!-- Required Fields Note -->
          <p class="required-note"><span class="required">*</span> Required Fields</p>

          <!-- Submit Button -->
          <button 
            type="submit" 
            class="btn btn-primary login-btn"
            [disabled]="isLoading"
          >
            <span *ngIf="!isLoading">Login</span>
            <app-spinner *ngIf="isLoading" [size]="'small'" [color]="'white'"></app-spinner>
          </button>
        </form>

        <!-- Flag for error state demo -->
        <span class="flag flag-4" *ngIf="loginForm.invalid && loginForm.touched">4</span>
      </div>
    </div>
  </div>

  <!-- Registration Modal -->
  <app-register
    *ngIf="showRegisterModal"
    (registrationComplete)="onRegistrationComplete($event)"
    (cancel)="onRegistrationCancel()"
  ></app-register>
</div>