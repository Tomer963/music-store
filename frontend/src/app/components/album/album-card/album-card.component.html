<!-- Album Card Component -->
<div
  class="album-card"
  [class.small]="size === 'small'"
  [class.medium]="size === 'medium'"
  [class.large]="size === 'large'"
  (click)="viewAlbum()"
>
  <!-- Album Image -->
  <div class="album-image">
    <img 
      [src]="mainImageUrl" 
      [alt]="album.title" 
      loading="lazy"
      (error)="onImageError($event)"
    />

    <!-- Hover Overlay for cards with showHover -->
    <div class="hover-overlay" *ngIf="showHover">
      <!-- Animated gray background -->
      <div class="hover-background"></div>
      
      <!-- Hover content -->
      <div class="hover-content">
        <div class="album-details">
          <h3 class="album-title-hover">{{ album.title }}</h3>
          <p class="album-artist-hover">{{ album.artist }}</p>
        </div>
        
        <div class="hover-actions">
          <button
            class="action-btn info-btn"
            (click)="viewAlbum(); $event.stopPropagation()"
            title="驻专"
          >
            <span class="icon">癸</span>
          </button>
          <button
            class="action-btn cart-btn"
            (click)="addToCart($event)"
            [disabled]="isAddingToCart || !album.inStock"
            title="住祝 注"
          >
            <span class="icon"></span>
          </button>
        </div>
        
        <div class="price-tag" *ngIf="album.inStock">
          {{ getFormattedPrice() }}
        </div>
        <div class="out-of-stock" *ngIf="!album.inStock">
           
        </div>
      </div>
    </div>
  </div>

  <!-- Album Info (for cards with showInfo) -->
  <div class="album-info" *ngIf="showInfo">
    <h3 class="album-title">{{ album.title }}</h3>
    <p class="album-artist">{{ album.artist }}</p>

    <!-- Additional Info -->
    <div class="additional-info">
      <p class="album-description" *ngIf="size !== 'small'">
        {{ getTruncatedDescription() }}
      </p>

      <!-- Price and Actions Bar (for cards with showPrice) -->
      <div class="price-actions-bar" *ngIf="showPrice">
        <span class="price">{{ getFormattedPrice() }}</span>
        <div class="action-buttons">
          <button
            class="icon-btn info-btn"
            (click)="viewAlbum(); $event.stopPropagation()"
            title="驻专"
          >
            <span>癸</span>
          </button>
          <button
            class="icon-btn cart-btn"
            (click)="addToCart($event)"
            [disabled]="isAddingToCart || !album.inStock"
            title="住祝 注"
          >
            <span></span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>